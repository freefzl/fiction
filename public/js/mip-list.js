(window.MIP=window.MIP||[]).push({name:"mip-list",func:function(){var e=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="https://c.mipcdn.com/static/v2/",n(n.s=210)}({0:function(e,t){e.exports=__mipComponentsWebpackHelpers__["@babel/runtime/helpers/esm/createClass"]},1:function(e,t){e.exports=__mipComponentsWebpackHelpers__["@babel/runtime/helpers/esm/classCallCheck"]},11:function(e,t){e.exports=__mipComponentsWebpackHelpers__["core-js/modules/_object-dp"]},14:function(e,t){e.exports=__mipComponentsWebpackHelpers__["core-js/modules/_redefine"]},2:function(e,t){e.exports=__mipComponentsWebpackHelpers__["core-js/modules/_an-object"]},20:function(e,t,n){"use strict";var r=n(2);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},210:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return g});n(28),n(72);var r=n(1),i=n.n(r),o=n(0),s=n.n(o),u=n(6),a=n.n(u),l=n(4),c=n.n(l),p=n(5),m=n.n(p),f=MIP,h=f.CustomElement,d=f.templates,b=f.util,_=window.fetchJsonp,v=b.log("mip-list"),g=function(e){function t(){return i()(this,t),a()(this,c()(t).apply(this,arguments))}return m()(t,e),s()(t,[{key:"connectedCallback",value:function(){this.sanitize(),this.pnName=this.element.getAttribute("pn-name")||this.element.getAttribute("pnName")||"pn",this.pn=this.element.getAttribute("pn")||1,this.timeout=this.element.getAttribute("timeout")||5e3,this.src=this.element.getAttribute("src")||""}},{key:"has",value:function(e){return this.element.hasAttribute(e)}},{key:"sanitize",value:function(){this.has("pnName")&&v.warn(this.element,"[Deprecated] pnName 属性不允许再使用，请使用 'pn-name' 代替")}},{key:"firstInviewCallback",value:function(){var e=this;this.container=document.createElement("div");var t=this.element,n=this.container;if(t.appendChild(n),n.hasAttribute("role")||n.setAttribute("role","list"),this.has("synchronous-data")){var r=t.querySelector('script[type="application/json"]'),i=r?b.jsonParse(r.textContent.toString()):null;this.renderTemplate(i)}else if(this.src){if(this.has("has-more")&&this.addEventAction("more",function(t){e.button=t.target,e.pushResult(e.src)}),this.has("preload")){var o=y(this.src,this.pnName,this.pn++);_(o,{timeout:this.timeout}).then(function(e){return e.json()}).then(function(t){!t.status&&t.data&&e.renderTemplate(t.data)})}}else v.error(this.element,"mip-list 的 src 属性不能为空")}},{key:"renderTemplate",value:function(e){var t=this;e&&e.items&&e.items instanceof Array?d.render(this.element,e.items).then(function(e){t.render(e)}):v.error(this.element,e,"数据不符合规范")}},{key:"pushResult",value:function(e){var t=this;if(!this.isEnd){this.button.innerHTML="加载中...";var n=y(e,this.pnName,this.pn++);_(n,{timeout:this.timeout}).then(function(e){return e.json()}).then(function(e){!e.status&&e.data?(t.renderTemplate(e.data),t.button.innerHTML="点击查看更多",e.data.isEnd&&(t.isEnd=e.isEnd,t.button.innerHTML="已经加载完毕",t.button.removeAttribute("on"))):t.button.innerHTML="加载失败"})}}},{key:"render",value:function(e){var t=document.createDocumentFragment();e.forEach(function(e){var n=document.createElement("div");n.innerHTML=e,n.setAttribute("role","listitem"),t.appendChild(n)}),this.container.appendChild(t)}}]),t}(h);function y(e,t,n){if(t&&n){var r=e;return e.indexOf("?")>0?(r+="?"===e[e.length-1]?"":"&",r+=t+"="+n):r+="?"+t+"="+n,r}}},28:function(e,t){e.exports=__mipComponentsWebpackHelpers__["core-js/modules/web.dom.iterable"]},4:function(e,t){e.exports=__mipComponentsWebpackHelpers__["@babel/runtime/helpers/esm/getPrototypeOf"]},5:function(e,t){e.exports=__mipComponentsWebpackHelpers__["@babel/runtime/helpers/esm/inherits"]},6:function(e,t){e.exports=__mipComponentsWebpackHelpers__["@babel/runtime/helpers/esm/possibleConstructorReturn"]},72:function(e,t,n){"use strict";n(74);var r=n(2),i=n(20),o=n(9),s=/./.toString,u=function(e){n(14)(RegExp.prototype,"toString",e,!0)};n(8)(function(){return"/a/b"!=s.call({source:"a",flags:"b"})})?u(function(){var e=r(this);return"/".concat(e.source,"/","flags"in e?e.flags:!o&&e instanceof RegExp?i.call(e):void 0)}):"toString"!=s.name&&u(function(){return s.call(this)})},74:function(e,t,n){n(9)&&"g"!=/./g.flags&&n(11).f(RegExp.prototype,"flags",{configurable:!0,get:n(20)})},8:function(e,t){e.exports=__mipComponentsWebpackHelpers__["core-js/modules/_fails"]},9:function(e,t){e.exports=__mipComponentsWebpackHelpers__["core-js/modules/_descriptors"]}});e.__esModule&&(e=e.default),e&&MIP.registerElement("mip-list",e)}});